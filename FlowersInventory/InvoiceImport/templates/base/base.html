<html lang='en'>
<head>
    <meta charset='utf-8'>
    <meta name="viewport" content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    {% include 'base/css.html' %}

</head>
<body>
{% include 'base/navbar.html' with brand_name="Lessly's Flowers"%}
<div class="container">
    {% block content %}

    {% endblock %}
</div>
{% include 'base/js.html' %}
<script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>


<script>
    $(document).ready(function () {
        // pulling 'invoice-form' in
        var invoiceForm = $('.invoice-form')
        console.log('inside .ready')

        invoiceForm.submit(function (event) {
            console.log('inside invoiceForm submit function')
            // grabbing data related to this form
            var thisForm = $(this)
            // the url
            var actionEndpoint = thisForm.attr("data-endpoint")
            // actual method - GET
            var httpMethod = thisForm.attr("method")
            // the form data
            var formData = thisForm.serialize();

            $.ajax({
                type: "GET",
                url: actionEndpoint,
                method: httpMethod,
                data: formData,

                success: function (data) {
                    console.log({data});
                    console.log("inside invoiceForm success")
                }
            })
        })

        // pulling 'invoices-products-form' in
        var invoiceProductForm = $('.invoices-products-form')
        console.log('listing to invoiceProductForm')

        invoiceProductForm.submit(function (event) {
            console.log('inside invoiceProductForm function')

            var thisForm = $(this)
            var actionEndpoint = thisForm.attr('data-endpoint')
            var httpMethod = thisForm.attr('method')
            var formData = thisForm.serialize();

            $.ajax({
                type: "GET",
                url: actionEndpoint,
                data: formData,

                success: function (data) {
                    var submitSpan = thisForm.find(".submit-span")
                    if (data) {
                        submitSpan.html('Found data')
                    } else {
                        submitSpan.html('no data')
                    }
                    console.log({data})
                    console.log(' inside invoiceProductForm success ')
                },
                error: function (errorData) {
                    console.log("error")
                    console.log(errorData)
                }
            })
        })

        // on click function for updating inventory quantities
        var selectProductToUpdateForm = $('.select_product_to_update_form')
        console.log('got form')

        document.getElementById("update-button").onclick = function () {
            selectProductToUpdate()
            // event.preventDefault()


        };

        function selectProductToUpdate(event) {
            event.preventDefault()

            document.getElementById("update-button").innerHTML = "LET'S DO IT!! ENTER NEW VALUE";
            document.getElementsByTagName("body")[0].style.color = "white";
            document.getElementsByTagName("body")[0].style.backgroundColor = "pink";
            document.getElementById("update-button").style.border = "4px yellow";

        }

    });
</script>
</body>
</html>